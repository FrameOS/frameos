import tables, base64

var assets: Table[string, string]

proc getAsset*(path: string): string =
  result = assets[path].decode()

func toByteSeq(str: string): seq[byte] {.inline.} =
  ## Copy ``string`` memory into an immutable``seq[byte]``.
  let length = str.len
  if length > 0:
    result = newSeq[byte](length)
    copyMem(result[0].unsafeAddr, str[0].unsafeAddr, length)

proc getAssetToByteSeq*(path: string): seq[byte] =
  result = toByteSeq (getAsset path)

assets["assets/compiled/web/control.html"] = """PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RnJhbWUgQ29udHJvbDwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgaHRtbCB7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgIH0KICAgICAgICBib2R5IHsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICAgICAgICB9CiAgICAgICAgLmJhY2tncm91bmQtYWJzb2x1dGUgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgei1pbmRleDogLTE7CiAgICAgICAgICAgIG9wYWNpdHk6IDAuNTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CiAgICAgICAgLmNvbnRlbnQtYmcgewogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIHotaW5kZXg6IDE7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgfQogICAgICAgIC50ZXh0LWJnIHsKICAgICAgICAgICAgbWF4LWhlaWdodDogY2FsYygxMDAlIC0gNDBweCk7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDJweDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87CiAgICAgICAgfQogICAgPC9zdHlsZT4KICAgIDxzY3JpcHQ+CiAgICAgICAgbGV0IGF1dGhLZXkgPSAiIjsKICAgICAgICBjb25zdCBoZWFkZXJzID0geydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9CiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpIHsKICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2Ygd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoIiYiKS5tYXAocCA9PiBwLnNwbGl0KCI9IikpKSB7CiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnaycpIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICBhdXRoS2V5ID0gdmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZ2V0QmFzZVBhdGgoKSB7CiAgICAgICAgICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgfHwgJy8nOwogICAgICAgICAgICByZXR1cm4gcGF0aC5lbmRzV2l0aCgnL2MnKSA/IHBhdGguc2xpY2UoMCwgLTIpICsgJy8nIDogKHBhdGguZW5kc1dpdGgoJy8nKSA/IHBhdGggOiBwYXRoICsgJy8nKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGJ1aWxkRnJhbWVVcmwocGF0aCkgewogICAgICAgICAgICByZXR1cm4gZ2V0QmFzZVBhdGgoKSArIHBhdGg7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHBvc3RSZW5kZXIoKSB7IAogICAgICAgICAgICBmZXRjaChidWlsZEZyYW1lVXJsKCdldmVudC9yZW5kZXInKSwgeyAKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCAKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsIAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pIAogICAgICAgICAgICB9KSAKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcG9zdFNldFNjZW5lU3RhdGUoKSB7IAogICAgICAgICAgICB2YXIgZGF0YT17cmVuZGVyOnRydWUsc3RhdGU6ey8qJCRmaWVsZHNTdWJtaXRIdG1sJCQqL319OwogICAgICAgICAgICBmZXRjaChidWlsZEZyYW1lVXJsKCdldmVudC9zZXRTY2VuZVN0YXRlJyksIHsgCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgCiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLCAKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpIAogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRTY2VuZVN0YXRlJykudmFsdWUgPSAnTm93IHdhaXQgYSB3aGlsZS4uLic7IAogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwb3N0U2V0Q3VycmVudFNjZW5lKCkgeyAKICAgICAgICAgICAgdmFyIGRhdGE9e3NjZW5lSWQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50U2NlbmVJZCcpLnZhbHVlfTsKICAgICAgICAgICAgZmV0Y2goYnVpbGRGcmFtZVVybCgnZXZlbnQvc2V0Q3VycmVudFNjZW5lJyksIHsgCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywgCiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLCAKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpIAogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRDdXJyZW50U2NlbmUnKS52YWx1ZSA9ICdSZWxvYWRpbmcgaW4gNSc7IAogICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7IAogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldEN1cnJlbnRTY2VuZScpLnZhbHVlID0gJ1JlbG9hZGluZy4uLic7IAogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9LCA1MDAwKTsKICAgICAgICB9CiAgICA8L3NjcmlwdD4KPC9oZWFkPgo8Ym9keSBzdHlsZT0icG9zaXRpb246cmVsYXRpdmUiPgogICAgPGRpdiBjbGFzcz0iYmFja2dyb3VuZC1hYnNvbHV0ZSI+CiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgaWYgKGF1dGhLZXkpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LndyaXRlKCc8aWZyYW1lIHNyYz0iJyArIGJ1aWxkRnJhbWVVcmwoJz9zPWNvbnRhaW4maz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGF1dGhLZXkpKSArICciIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjowIj48L2lmcmFtZT4nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LndyaXRlKCc8aWZyYW1lIHNyYz0iJyArIGJ1aWxkRnJhbWVVcmwoJz9zPWNvbnRhaW4nKSArICciIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjowIj48L2lmcmFtZT4nKTsKICAgICAgICAgICAgfQogICAgICAgIDwvc2NyaXB0PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJjb250ZW50LWJnIj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWJnIj4KICAgICAgICAgICAgPGgyPlNjZW5lPC9oMj4KICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9J3Bvc3RTZXRDdXJyZW50U2NlbmUoKTsgcmV0dXJuIGZhbHNlJz48c2VsZWN0IGlkPSJjdXJyZW50U2NlbmVJZCI+LyokJHNjZW5lT3B0aW9uc0h0bWwkJCovPC9zZWxlY3Q+PGlucHV0IHR5cGU9J3N1Ym1pdCcgaWQ9InNldEN1cnJlbnRTY2VuZSIgdmFsdWU9J1NldCBTY2VuZSc+PC9mb3JtPgogICAgICAgICAgICA8aDI+U3RhdGU8L2gyPgogICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD0ncG9zdFNldFNjZW5lU3RhdGUoKTsgcmV0dXJuIGZhbHNlJz4vKiQkZmllbGRzSHRtbCQkKi88L2Zvcm0+CiAgICAgICAgICAgIDxoMj5BY3Rpb25zOjwvaDI+CiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PSdwb3N0UmVuZGVyKCk7IHJldHVybiBmYWxzZSc+PGlucHV0IHR5cGU9J3N1Ym1pdCcgdmFsdWU9J1JlbmRlcic+PC9mb3JtPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvYm9keT4KPC9odG1sPgo="""

